{% load static %}
{% load omfilters %}

<div class="table-responsive">
    <table class="table">
        <tr>
            <th class="d-none d-lg-block">Imagem</th>
            <th>Produto</th>
            <th>Variação</th>
            <th>QTD.</th>
            <th>Total</th>
        </tr>
        {% for linha in carrinho.values %}
            <tr>
                <td class="d-none d-lg-block">
                    <img class="cart-img" src="{% get_media_prefix %}{{ linha.imagem }}">
                </td>
                <td>
                    <a href="{% url 'produto:detalhe' linha.slug %}">
                        {{ linha.produto_nome }}
                    </a>
                    <a class="ml-3" href="{% url 'produto:removerdocarrinho'  %}?vid={{ linha.variacao_id }}">
                        <i class="fas fa-times-circle text-danger" aria-hidden="true"></i>
                    </a>
                </td>
                {% if linha.variacao_nome %}
                    <td>{{ linha.variacao_nome }}</td>
                {% else %}
                    <td> - </td>
                {% endif %}
                <td>
                    <div class="d-flex align-items-center">
                        <a href="{% url 'produto:atualizarquantidade' %}?vid={{ linha.variacao_id }}&acao=diminuir" 
                            class="btn btn-sm btn-primary mr-2">
                            <i class="fas fa-minus"></i>
                        </a>
                        <span class="quantidade-item" data-variacao-id="{{ linha.variacao_id }}">
                            {{ linha.quantidade }}
                        </span>
                        <a href="{% url 'produto:atualizarquantidade' %}?vid={{ linha.variacao_id }}&acao=aumentar" 
                            class="btn btn-sm btn-primary ml-2">
                            <i class="fas fa-plus"></i>
                        </a>
                    </div>
                </td>

                {% if linha.preco_quantitativo_promocional %}
                    <td class="preco-total-item" data-variacao-id="{{ linha.variacao_id }}">
                        R$ {{ linha.preco_quantitativo_promocional | formata_preco }}
                    </td>
                {% else %}
                    <td class="preco-total-item" data-variacao-id="{{ linha.variacao_id }}">
                        R$ {{ linha.preco_quantitativo | formata_preco }}
                    </td>
                {% endif %} 

            </tr>
        {% endfor %}
    </table>
</div>